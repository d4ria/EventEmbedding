schema: '2.0'
stages:
  preprocess_data:
    cmd: PYTHONPATH=. python3 scripts/preprocess_data.py
    deps:
    - path: scripts/preprocess_data.py
      md5: ff6d83f4a84dd6e325e8088b22366c80
      size: 338
    params:
      params.yaml:
        datapath: data/comments.csv
        timedelta: D
    outs:
    - path: data/preprocessed_dataframe.pkl
      md5: c302c7f04157fc992fcb545f0a78c9a7
      size: 11491431
  calculate_event_graph_weights:
    cmd: python -m scripts.create_event_graph
    deps:
    - path: scripts/create_event_graph.py
      md5: 979983a0d20b3aab28e193325dfea9c1
      size: 763
    params:
      params.yaml:
        data_ratio: 1.0
        timedelta: D
    outs:
    - path: data/event_to_nodes.pkl
      md5: dbca456b3af1af49771c8028004789ab
      size: 16030242
    - path: data/w_co_dict.pkl
      md5: 0c7b361b0edae0fc3d318c5eab756a56
      size: 78770
    - path: data/w_path_dict.pkl
      md5: 42fb56089ad330ca409c0bec4f8ebb99
      size: 2389924
  sample_neighbourhoods:
    cmd: PYTHONPATH=. python3 scripts/sample_neighbourhoods.py
    deps:
    - path: scripts/sample_neighbourhoods.py
      md5: 19410dd274e11c012d415dcbf0fd4215
      size: 786
    params:
      params.yaml:
        sampling.alpha: 0.5
        sampling.nb: 5
        sampling.s: 10
    outs:
    - path: data/sampled_neighbourhoods.pkl
      md5: 37d05cbf74a73af38ce56db0a31398a3
      size: 4307116
